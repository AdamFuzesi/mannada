new class{constructor(){this.attachEventListeners()}attachEventListeners(){document.getElementById("setup-button").addEventListener("click",()=>{this.requestPermission()})}showStatus(e,t="info"){const s=document.getElementById("status");s.textContent=e,s.className=`status ${t}`,s.style.display="block"}async requestPermission(){const e=document.getElementById("setup-button");e.disabled=!0,e.textContent="Requesting permission...";try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),await chrome.storage.local.set({microphonePermissionGranted:!0}),this.showStatus("✅ Success! Microphone permission granted. You can now close this tab and use voice commands in the popup.","success"),e.textContent="Permission Granted ✓",setTimeout(()=>{window.close()},2e3)}catch(t){console.error("Microphone permission error:",t);let s="Permission denied. ";"NotAllowedError"===t.name?s+='Please click "Allow" when Chrome asks for microphone access. You may need to click the camera icon in the address bar to change the permission.':"NotFoundError"===t.name?s+="No microphone found. Please connect a microphone and try again.":s+=t.message,this.showStatus("❌ "+s,"error"),e.disabled=!1,e.textContent="Try Again"}}};